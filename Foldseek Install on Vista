mkdir -p $WORK/apps/foldseek && cd $WORK/apps/foldseek

wget https://mmseqs.com/foldseek/foldseek-linux-arm64.tar.gz

tar xvfz foldseek-linux-arm64.tar.gz

#add this to end of .bashrc (comment out if not using mmSeqs2)

# --- Foldseek PATH (added Nov 2025) ---
export PATH=$PATH:$WORK/apps/foldseek/foldseek/bin

# --- mmseqs2 PATH (optional, comment out if unused) ---
export PATH=$PATH:$WORK/apps/mmseqs2/mmseqs/bin

#download foldseek databases for comparison (PDB and AlphaFold-SwissProt)
mkdir -p $WORK/foldseek_dbs && cd $WORK/foldseek_dbs

wget https://opendata.mmseqs.org/foldseek/pdb100.tar.gz
wget https://opendata.mmseqs.org/foldseek/pdb100.version
tar xvfz pdb100.tar.gz
wget https://foldseek.steineggerlab.workers.dev/afdb_swissprot.tar.gz
tar xvfz afdb_swissprot.tar.gz

#From within the folder of structures to search - create a DB (will work faster in bulk)
foldseek createdb "$(pwd)" myDB \
  --threads 8 \
  --file-include '.*\.pdb$' \


cd /work/10930/bjelen/vista/foldseek_dbs
tar xvfz pdb100.tar.gz

cd /home1/10930/bjelen/esmfold_out/high_conf
mkdir -p ./tmp

foldseek search myDB $WORK/foldseek_dbs/pdb100_db/pdb aln_pdb100 ./tmp --threads 32 --alignment-mode 3
foldseek convertalis myDB $WORK/foldseek_dbs/pdb100_db/pdb aln_pdb100 hits_pdb100.m8 --threads 32





